<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Requirements Specification: Blah 1.06 • mrgvalprep</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><meta property="og:title" content="Requirements Specification: Blah 1.06"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-title-body">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">mrgvalprep</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="articles/basic_usage.html">Basic Usage of mrgvalprep and mrgvalidate</a>
    </li>
  </ul></li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/metrumresearchgroup/mrgvalprep" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Requirements Specification: Blah 1.06</h1>
    </div>


<div id="requirements-specification-blah-106" class="section level1">

<div class="section level2">
<h2 id="scope">Scope<a class="anchor" aria-label="anchor" href="#scope"></a></h2>
<p>The purpose of this document is to define specific criteria for each
testing task. Testing shall be conducted in accordance with the
requirements within this document. The Requirement Specifications ensure
that each requirement is tested.</p>
</div>
<div class="section level2">
<h2 id="user-story-mrgvalidatetestreference-1-based_on-tag-correctly-stores-relative-paths">User Story: mrgvalidatetestreference-1 based_on tag correctly stores
relative paths<a class="anchor" aria-label="anchor" href="#user-story-mrgvalidatetestreference-1-based_on-tag-correctly-stores-relative-paths"></a></h2>
<p>User should be able to use the <code>based_on</code> field to
unambiguously refer to models, even in cases where nested directories
may contain different models with the same base filename.</p>
<p><strong>Requirements</strong></p>
<ul><li>The <code>based_on</code> field stores file paths <em>relative to
the yaml the field is stored in</em> (without extensions).</li>
<li>This propogates through to the <code>run_log()</code> output in such
a way that the user can trace model ancestry unambiguously.</li>
</ul><p><strong>Product risk</strong>: low</p>
<p><strong>Tests</strong></p>
<table class="table"><colgroup><col width="10%"><col width="89%"></colgroup><thead><tr class="header"><th align="left">Test ID</th>
<th align="left">Test name</th>
</tr></thead><tbody><tr class="odd"><td align="left">BLAH-081</td>
<td align="left">safe_based_on works on happy path</td>
</tr><tr class="even"><td align="left">BLAH-082</td>
<td align="left">safe_based_on works on happy path with vector</td>
</tr><tr class="odd"><td align="left">BLAH-083</td>
<td align="left">safe_based_on works on nested dirs</td>
</tr><tr class="even"><td align="left">BLAH-084</td>
<td align="left">safe_based_on works with absolute path</td>
</tr><tr class="odd"><td align="left">BLAH-085</td>
<td align="left">safe_based_on fails when yaml can’t be found</td>
</tr><tr class="even"><td align="left">BLAH-080</td>
<td align="left">add_based_on() and replace_based_on() work
correctly</td>
</tr><tr class="odd"><td align="left">BLAH-113</td>
<td align="left">run_log matches reference</td>
</tr><tr class="even"><td align="left">BLAH-115</td>
<td align="left">run_log() works correctly with nested dirs</td>
</tr><tr class="odd"><td align="left">BLAH-102</td>
<td align="left">new_model() .based_on arg works</td>
</tr><tr class="even"><td align="left">BLAH-020</td>
<td align="left">get_based_on works happy path model object</td>
</tr><tr class="odd"><td align="left">BLAH-021</td>
<td align="left">get_based_on works happy path character</td>
</tr><tr class="even"><td align="left">BLAH-023</td>
<td align="left">get_based_on works happy path run_log tibble</td>
</tr><tr class="odd"><td align="left">BLAH-024</td>
<td align="left">get_based_on constructs ancestry manually</td>
</tr><tr class="even"><td align="left">BLAH-025</td>
<td align="left">get_based_on .check_exists=TRUE errors if model is
gone</td>
</tr><tr class="odd"><td align="left">BLAH-026</td>
<td align="left">get_based_on() behaves correctly on missing keys</td>
</tr><tr class="even"><td align="left">BLAH-027</td>
<td align="left">get_model_ancestry works happy path model object</td>
</tr><tr class="odd"><td align="left">BLAH-028</td>
<td align="left">get_model_ancestry works happy path character</td>
</tr><tr class="even"><td align="left">BLAH-030</td>
<td align="left">get_model_ancestry works happy path run_log tibble</td>
</tr><tr class="odd"><td align="left">BLAH-031</td>
<td align="left">get_model_ancestry errors if model is gone</td>
</tr><tr class="even"><td align="left">BLAH-032</td>
<td align="left">get_model_ancestry works on run_log tibble with more
complicated ancestry</td>
</tr></tbody></table><hr></div>
<div class="section level2">
<h2 id="user-story-mrgvalidatetestreference-2-support-both-yml-and-yaml-extensions">User Story: mrgvalidatetestreference-2 support both yml and yaml
extensions<a class="anchor" aria-label="anchor" href="#user-story-mrgvalidatetestreference-2-support-both-yml-and-yaml-extensions"></a></h2>
<p>A user can use either a .yaml or .yml file for the model file.</p>
<p><strong>Requirements</strong></p>
<ul><li>All functions that search for model files and read them in will
correctly recognize both .yaml and .yml model files.</li>
<li>All functions that write model files programmatically will use
.yaml</li>
</ul><p><strong>Product risk</strong>: low</p>
<p><strong>Tests</strong></p>
<table class="table"><colgroup><col width="11%"><col width="88%"></colgroup><thead><tr class="header"><th align="left">Test ID</th>
<th align="left">Test name</th>
</tr></thead><tbody><tr class="odd"><td align="left">BLAH-065</td>
<td align="left">find_yaml_file_path returns correct yaml path</td>
</tr><tr class="even"><td align="left">BLAH-066</td>
<td align="left">find_yaml_file_path returns correct yml path</td>
</tr><tr class="odd"><td align="left">BLAH-067</td>
<td align="left">find_yaml_file_path errors when no file found</td>
</tr><tr class="even"><td align="left">BLAH-068</td>
<td align="left">find_yaml_file_path errors when two files found</td>
</tr><tr class="odd"><td align="left">BLAH-101</td>
<td align="left">new_model() works with yml path</td>
</tr><tr class="even"><td align="left">BLAH-094</td>
<td align="left">read_model() returns expected object from yml ext</td>
</tr><tr class="odd"><td align="left">BLAH-095</td>
<td align="left">read_model() returns expected object from no ext
specified</td>
</tr><tr class="even"><td align="left">BLAH-121</td>
<td align="left">submit_model(.dry_run=T) with .mod input and .yml file
parses correctly</td>
</tr><tr class="odd"><td align="left">BLAH-122</td>
<td align="left">submit_model(.dry_run=T) with file path no extension
parses correctly</td>
</tr></tbody></table><hr></div>
<div class="section level2">
<h2 id="user-story-mrgvalidatetestreference-3-check-for-babylonyaml-in-model-directory">User Story: mrgvalidatetestreference-3 Check for babylon.yaml in
model directory<a class="anchor" aria-label="anchor" href="#user-story-mrgvalidatetestreference-3-check-for-babylonyaml-in-model-directory"></a></h2>
<p>The user should only need to create one babylon.yaml configuration
file, and it should be found by all <code>bbi</code> calls that need it
automatically (if it is in the model directory).</p>
<p><strong>Requirements:</strong></p>
<ul><li>All calls that need <code>babylon.yaml</code> will look for it (and
error if it can’t be found) before calling out to <code>bbi</code>
</li>
<li>When user does not explicitly specify a path to a
<code>babylon.yaml</code> it will be looked for in
<code>getOption("rbabylon.model_directory")</code>
</li>
<li>If the user wants to use a different configuration file for some
models, they can pass the path to that into the
<code>submit_model()</code> calls explicitly.</li>
</ul><p><strong>Product risk</strong>: low</p>
<p><strong>Tests</strong></p>
<table class="table"><colgroup><col width="7%"><col width="92%"></colgroup><thead><tr class="header"><th align="left">Test ID</th>
<th align="left">Test name</th>
</tr></thead><tbody><tr class="odd"><td align="left">BLAH-156</td>
<td align="left">summary call is the same using rbabylon.model_directory
= ‘model-examples’ .</td>
</tr><tr class="even"><td align="left">BLAH-157</td>
<td align="left">summary call is the same using rbabylon.model_directory
= ‘model-examples’ ..</td>
</tr><tr class="odd"><td align="left">BLAH-158</td>
<td align="left">summary call is the same using rbabylon.model_directory
= ‘model-examples’ model-examples</td>
</tr><tr class="even"><td align="left">BLAH-159</td>
<td align="left">summary call is the same using rbabylon.model_directory
= ‘model-examples’ . change_midstream</td>
</tr><tr class="odd"><td align="left">BLAH-160</td>
<td align="left">summary call is the same using rbabylon.model_directory
= ‘model-examples’ .. change_midstream</td>
</tr><tr class="even"><td align="left">BLAH-161</td>
<td align="left">summary call is the same using rbabylon.model_directory
= ‘model-examples’ model-examples change_midstream</td>
</tr><tr class="odd"><td align="left">BLAH-162</td>
<td align="left">basic workflow is correct from different working
directories .</td>
</tr><tr class="even"><td align="left">BLAH-163</td>
<td align="left">basic workflow is correct from different working
directories ..</td>
</tr><tr class="odd"><td align="left">BLAH-164</td>
<td align="left">basic workflow is correct from different working
directories model-examples</td>
</tr><tr class="even"><td align="left">BLAH-165</td>
<td align="left">basic workflow is correct from different working
directories . change_midstream</td>
</tr><tr class="odd"><td align="left">BLAH-166</td>
<td align="left">basic workflow is correct from different working
directories .. change_midstream</td>
</tr><tr class="even"><td align="left">BLAH-167</td>
<td align="left">basic workflow is correct from different working
directories model-examples change_midstream</td>
</tr><tr class="odd"><td align="left">BLAH-168</td>
<td align="left">Summary call is the same after changing directories
.</td>
</tr><tr class="even"><td align="left">BLAH-169</td>
<td align="left">Summary call is the same after changing directories
..</td>
</tr><tr class="odd"><td align="left">BLAH-170</td>
<td align="left">Summary call is the same after changing directories
model-examples</td>
</tr><tr class="even"><td align="left">BLAH-171</td>
<td align="left">Summary call is the same after changing directories .
change_midstream</td>
</tr><tr class="odd"><td align="left">BLAH-172</td>
<td align="left">Summary call is the same after changing directories ..
change_midstream</td>
</tr><tr class="even"><td align="left">BLAH-173</td>
<td align="left">Summary call is the same after changing directories
model-examples change_midstream</td>
</tr><tr class="odd"><td align="left">BLAH-145</td>
<td align="left">find_config_file_path() parses correctly 1</td>
</tr><tr class="even"><td align="left">BLAH-146</td>
<td align="left">find_config_file_path() parses correctly 2</td>
</tr><tr class="odd"><td align="left">BLAH-147</td>
<td align="left">find_config_file_path() parses correctly 3</td>
</tr><tr class="even"><td align="left">BLAH-148</td>
<td align="left">find_config_file_path() errors correctly 1</td>
</tr><tr class="odd"><td align="left">BLAH-149</td>
<td align="left">find_config_file_path() errors correctly 2</td>
</tr></tbody></table><hr></div>
<div class="section level2">
<h2 id="user-story-mrgvalidatetestreference-4-copying-models-in-typical-workflow">User Story: mrgvalidatetestreference-4 Copying models in typical
workflow<a class="anchor" aria-label="anchor" href="#user-story-mrgvalidatetestreference-4-copying-models-in-typical-workflow"></a></h2>
<p>A user should be able to call <code>copy_model_from()</code> without
worrying about accidentally overwriting an existing model file.</p>
<p><strong>Requirements</strong></p>
<ul><li>Existing files will <em>not</em> be overwritten by default.</li>
<li>There should be an argument exposed to let users choose to overwrite
an existing file if they intend to.</li>
</ul></div>
</div>
<div class="section level1">
<h1 id="section"></h1>
<p><strong>Product risk</strong>: low</p>
<p><strong>Tests</strong></p>
<table class="table"><thead><tr class="header"><th align="left">Test ID</th>
<th align="left">Test name</th>
</tr></thead><tbody><tr class="odd"><td align="left">BLAH-018</td>
<td align="left">copy_from_model .overwrite=FALSE works</td>
</tr><tr class="even"><td align="left">BLAH-017</td>
<td align="left">copy_from_model .overwrite=TRUE works</td>
</tr></tbody></table><hr><div class="section level2">
<h2 id="user-story-mrgvalidatetestreference-5-model-object-should-stay-in-sync-with-yaml-file">User Story: mrgvalidatetestreference-5 Model object should stay in
sync with YAML file<a class="anchor" aria-label="anchor" href="#user-story-mrgvalidatetestreference-5-model-object-should-stay-in-sync-with-yaml-file"></a></h2>
<p>The model YAML must serve as a “source of truth” for the data that it
stores about the model. The user needs to be sure that any model object
held in memory is up-to-date with the YAML on disk.</p>
<p><strong>Requirements</strong></p>
<ul><li>Any function taking a model object will check against the yaml and
error if the md5 hashes don’t match, in other words “if the YAML has
changed since it was loaded.”</li>
<li>The error message mentions the <code>reconcile_yaml()</code>
function that can be used to pull changes from the YAML into the model
object.</li>
</ul><p><strong>Product risk</strong>: low</p>
<p><strong>Tests</strong></p>
<table class="table"><colgroup><col width="10%"><col width="89%"></colgroup><thead><tr class="header"><th align="left">Test ID</th>
<th align="left">Test name</th>
</tr></thead><tbody><tr class="odd"><td align="left">BLAH-086</td>
<td align="left">reconcile_yaml() pulls in new tags</td>
</tr><tr class="even"><td align="left">BLAH-087</td>
<td align="left">check_yaml_in_sync() passes when nothing has
changed</td>
</tr><tr class="odd"><td align="left">BLAH-088</td>
<td align="left">check_yaml_in_sync() fails when YAML has changed and
passes after reconciled</td>
</tr><tr class="even"><td align="left">BLAH-089</td>
<td align="left">add_tags fails if it wasn’t re-assigned previously
(testing check_yaml_in_sync)</td>
</tr><tr class="odd"><td align="left">BLAH-090</td>
<td align="left">submit_model() fails YAML out of sync (testing
check_yaml_in_sync)</td>
</tr><tr class="even"><td align="left">BLAH-091</td>
<td align="left">model_summary() fails YAML out of sync (testing
check_yaml_in_sync)</td>
</tr><tr class="odd"><td align="left">BLAH-092</td>
<td align="left">copy_model_from() fails YAML out of sync (testing
check_yaml_in_sync)</td>
</tr></tbody></table><hr></div>
</div>


  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by Devin Pastoor, Seth Green, Kyle Meyer, Kyle T Baron,
Sean Wilson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

